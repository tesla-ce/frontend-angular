<form [formGroup]="formGroup" (ngSubmit)="onSubmit()">    
    <div class="row">
        <div *ngFor="let field of fields | keyvalue" class="col-sm-6">
            <div class="form-group" [ngSwitch]="field.value.inputType">
                <label [for]="field.value.inputName" class="label">{{field.value.label || field.key}}</label>
                <nb-select fullWidth *ngSwitchCase="'select'" placeholder="Select..." [formControl]="formControls[field.key]">
                    <!-- <nb-option value="" *ngIf="!field.value.required">Option empty</nb-option> -->
                    <nb-option *ngFor="let option of field.value.options; let i = index" value="{{option.value}}">{{option.key}}</nb-option>
                </nb-select>
                <nb-select fullWidth multiple *ngSwitchCase="'select-multiple'" placeholder="Select..." [formControl]="formControls[field.key]">
                    <!-- <nb-option value="" *ngIf="!field.value.required">Option empty</nb-option> -->
                    <nb-option *ngFor="let option of field.value.options; let i = index" value="{{option.value}}">{{option.key}}</nb-option>
                </nb-select>
                <nb-select fullWidth multiple *ngSwitchCase="'select-multiple-remote'" placeholder="Select..." [formControl]="formControls[field.key]">
                    <!-- <nb-option value="" *ngIf="!field.value.required">Option empty</nb-option> -->
                    <nb-option *ngFor="let option of field.value.options; let i = index" value="{{option.value}}">{{option.key}}</nb-option>
                </nb-select>
                <input *ngSwitchDefault nbInput fullWidth
                    [type]="field.value.inputType || text"
                    [id]="field.value.inputName || field.key"
                    [name]="field.value.inputName || field.key"
                    [formControlName]="field.key"
                    [placeholder]="field.value.placeholder || null" 
                    [attr.disabled]="field.value.disabled || null"
                    [attr.email]="field.value.validator == 'email' || null"
                    [required] = "field.value.required || false" 
                    [status] = "formErrors[field.key]?'danger':'default'" >
                    <errors class="text-danger">{{formErrors[field.key]?formErrors[field.key]:''}}</errors>
            </div>
        </div>
    </div>
    <button *ngIf="!loading" nbButton type="submit" [disabled]="!formGroup.valid">Submit</button>
<p>
    <!-- {{ formGroup.status }} -->
</p>
</form>